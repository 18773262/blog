## 向量数据库, 让AI聪明亿点点. 解决AI对新知识的幻觉、不知道问题, 解决AI在交流过程中的失忆问题  
            
### 作者            
digoal            
            
### 日期            
2024-06-14            
            
### 标签            
PostgreSQL , PolarDB , DuckDB , AI , 大模型 , 向量数据库 , vector , pgvector , 通义         
            
----            
            
## 背景     
如果AI遇到不懂领域的问题怎么办? 如果AI没有记忆, 当AI和你聊天会出现什么后果?  向量数据库, 让AI聪明亿点点. 解决AI对新知识的幻觉、不知道问题, 解决AI在交流过程中的失忆问题     
  
1、AI是将已有知识进行训练后产生的智能. 那么问题来了: 如果AI遇到不懂领域的问题怎么办? 例如1 在没有使用相关素材训练过的情况下问的问题(冷门知识, 私有知识如医疗、军队、企业内部知识库等)、随着科学新发现、产品的更新迭代, 2 新出现的知识.    
  
如果AI遇到不懂的领域问题怎么办? 结果可能是:    
- 出现幻觉, 胡说八道  
- 回答不知道, 知之为知之, 不知为不知  
  
2、如果AI没有记忆, 当AI和你聊天会出现什么后果?   
  
小时候听过一则这样的笑话: 一位健忘患者一天要出门狩猎, 妻子给他备好马和弓箭, 这个哥们骑着马就快乐的出发了. 走到半路突然觉得肚子疼, 赶紧找了个隐蔽的地方, 先把马拴好, 然后把弓箭插在背后的地上, 开始随地大小便. 完事之后, 回头准备离开, 一看地上插着几根箭, 心想谁射的箭, 幸好没被射到. 但是也吓了一个踉跄就往后退了几步, 差点踩到自己刚刚拉完的米田共, 于是破口大骂哪个没公德心的随地大小便. 然后继续往前走, 走着走着看到了自己拴的马匹, 大喜过望, 哎呀今天捡到一匹良驹, 也算幸运啊, 回家告诉娘子肯定会很高兴, 于是骑上马就回家了.   
  
如果AI没有记忆, 当AI和你聊天会出现什么后果?   
- 可能和只有七秒记忆的鱼一样, 也可能和老年痴呆、健忘患者一样, 你上一句跟AI说的话, AI已经忘记了, 要再说一遍.   
  
## 为了让AI更聪明亿点点, 向量数据库应运而生  
一、为什么向量数据库可以让AI更聪明亿点点?  
  
1、把新知识、私有知识库的内容切片, 把切片转换为向量(向通义这样的大模型发起API调用, 得到文本对应的向量值). 例如按段落切片, 在数据库中存储段落原文+对应的向量.  
  
2、在向量字段上创建向量索引, 提高向量距离相近搜索的效率.  
  
3、问题Q1, 当和AI交互时, 如果对AI回答不满意, 可以这样问:  
  
我对你的回答不满意, 请问要让你更准确的回答...问题, 需要向你再提供哪些知识?   
  
此时AI应该会回答一些提示给你, 假设AI回答的内容为: pA  
  
4、此时我们可以封装一条这样的文本: "问题: Q1, 知识点: pA", 向通义这样的大模型发起API调用, 得到文本对应的向量值, 假设为vec1.   
  
5、在向量数据库中获取vec1最近的文本内容, 也就是我们想要的知识点的文本内容, 假设返回con1.   
  
```  
select content as con1 from tbl_vec order by vec1 <=> vec limit 1;  
```  
  
6、重新向AI提问:   
```  
给你提供一些与本问题相关的内部知识, 请绝对相信这个信息的准确度, 然后参考这个信息对问题再进行回答.  
问题: Q1  
参考知识: con1  
```  
  
此时得到的答案就会相对更满意. 就像人类遇到不懂的问题会先去找相关文档, 阅读和消化文档后自然就能解决相关问题了.     
  
二、为什么向量数据库可以解决AI失忆的问题?  
  
如果你和AI交流是个会话, 会话中有多轮的问答. 我们可以把对应的文本和对应的向量存储到向量数据库, 当我们和AI交流时, 把当前问题以及当前问题相关的历史问题和历史回答都发给AI, 解决AI的失忆问题.  
  
## 实验手册  
[《开源PolarDB|PostgreSQL 应用开发者&DBA 公开课 - 5.7 PolarDB开源版本必学特性 - PolarDB 应用实践实验》](../202401/20240129_01.md)    
  
## 直播预约  
本周六19:30话题: 向量数据库, 让你的AI聪明亿点点.  
  
  
